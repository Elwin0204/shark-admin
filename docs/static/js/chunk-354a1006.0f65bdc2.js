/*!
 *  build: shark-admin 
 *  https://elwin0204.github.io/shark-admin 
 *  https://github.com/elwin0204/shark-admin 
 *  time: 2024-3-3 23:30:14
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-354a1006"],{"675a":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"menuManagement-container"},[l("el-card",[l("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[l("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[l("el-form",{attrs:{inline:!0,model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[l("el-form-item",[l("el-input",{attrs:{placeholder:"请输入菜单名称",clearable:""},model:{value:e.queryForm.menu,callback:function(t){e.$set(e.queryForm,"menu","string"===typeof t?t.trim():t)},expression:"queryForm.menu"}})],1),l("el-form-item",[l("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1),l("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[l("div",{staticClass:"btns-box"},[l("el-button",{attrs:{icon:e.isExpandAll?"el-icon-arrow-down":"el-icon-arrow-right",type:"primary"},on:{click:e.toggleExpand}},[e._v(" 一键展开/折叠 ")])],1)])],1),l("el-table",{ref:"REF_NavTree",attrs:{data:e.navList,"row-key":"id",border:"","default-expand-all":e.isExpandAll,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[l("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"title",label:"菜单名称",width:"240",fixed:"left"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"code",label:"菜单编码",width:"180"}}),l("el-table-column",{attrs:{prop:"id",label:"id",width:"120"}}),l("el-table-column",{attrs:{prop:"parentId",label:"父id",width:"120"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"path",label:"路由地址",width:"240"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"component",label:"组件路径",width:"240"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"sort",label:"排序",width:"120",align:"center"}}),l("el-table-column",{attrs:{prop:"hidden",label:"是否隐藏",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(l.hidden?"是":"否")+" ")]}}])}),l("el-table-column",{attrs:{prop:"type",label:"类型",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(e._f("typeFilter")(l.type))+" ")]}}])}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"图标",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.icon?l("v-icon",{attrs:{name:a.icon}}):e._e()]}}])}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"是否固定",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(l.affix?"是":"否")+" ")]}}])}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"面包屑",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(l.breadcrumb?"否":"是")+" ")]}}])}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"是否无缓存",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(l.noCache?"是":"否")+" ")]}}])}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"标签",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(l.badge)+" ")]}}])}),l("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"是否禁用",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(l.disabled?"是":"否")+" ")]}}])}),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[l("el-button",{attrs:{plain:"",type:"success",size:"mini"},on:{click:function(t){return e.handleAdd(a)}}},[e._v(" 新增 ")]),l("el-button",{attrs:{plain:"",type:"warning",size:"mini"},on:{click:function(t){return e.handleEdit(a)}}},[e._v(" 修改 ")]),l("el-button",{attrs:{plain:"",type:"danger",size:"mini"},on:{click:function(t){return e.handleDelete(a)}}},[e._v(" 删除 ")])]}}])})],1)],1),l("edit-menu",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},o=[],r=l("2033"),n=l("754e"),i=l("c904"),s=l("056f"),c={name:"MenuManagement",components:{EditMenu:i["default"]},filters:{typeFilter(e){const t={menu:"菜单",page:"页面",button:"按钮"};return t[e]||e}},data(){return{data:[],defaultProps:{children:"children",label:"label"},list:[],listLoading:!0,elementLoadingText:"正在加载...",isExpandAll:!1,navList:[],queryForm:{menu:""}}},async created(){const e=await Object(n["getTree"])();this.data=e.data,this.fetchData(),this.fetchNavData()},methods:{handleAdd(e){this.$refs["edit"].showEdit("add",e)},handleEdit(e){this.$refs["edit"].showEdit("edit",e)},handleDelete(e){e.id&&this.$baseConfirm("你确定要删除当前项吗",null,async()=>{const{msg:t}=await Object(n["doDelete"])({ids:e.id});this.$baseMessage(t,"success"),this.fetchData()})},async fetchNavData(){const{data:e}=await Object(r["getRouteList"])();this.navList=Object(s["arr2Tree"])(e)},async fetchData(){this.listLoading=!0;const{data:e}=await Object(r["getRouterList"])();this.list=e,setTimeout(()=>{this.listLoading=!1},300)},handleNodeClick(e){this.fetchData()},queryData(){console.log("查询")},toggleExpand(e){this.isExpandAll=!this.isExpandAll,this.toggleRowExpansionAll(this.navList,this.isExpandAll)},toggleRowExpansionAll(e,t){e.forEach(e=>{this.$refs.REF_NavTree.toggleRowExpansion(e,t),e.children&&e.children.length>0&&this.toggleRowExpansionAll(e.children,t)})}}},u=c,d=(l("b301"),l("2877")),f=Object(d["a"])(u,a,o,!1,null,"441c7834",null);t["default"]=f.exports},"754e":function(e,t,l){"use strict";l.r(t),l.d(t,"getTree",(function(){return o})),l.d(t,"doEdit",(function(){return r})),l.d(t,"doDelete",(function(){return n}));var a=l("b775");function o(e){return Object(a["default"])({url:"/menuManagement/getTree",method:"post",data:e})}function r(e){return Object(a["default"])({url:"/menuManagement/doEdit",method:"post",data:e})}function n(e){return Object(a["default"])({url:"/menuManagement/doDelete",method:"post",data:e})}},a855:function(e,t,l){},b301:function(e,t,l){"use strict";l("a855")},c904:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"700px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[l("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"auto"}},[l("el-row",{attrs:{type:"flex",gutter:20}},[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"菜单编码",prop:"title"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),l("el-form-item",{attrs:{label:"id",prop:"id"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),l("el-form-item",{attrs:{label:"parentId",prop:"parentId"}},[l("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),l("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),l("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),l("el-form-item",{attrs:{label:"排序",prop:"sort"}},[l("el-input-number",{attrs:{"controls-position":"right",min:0,autocomplete:"off"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"是否隐藏",prop:"hidden"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},e._l(e.hiddenOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"类型",prop:"type"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"图标",prop:"icon"}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),l("el-form-item",{attrs:{label:"是否固定",prop:"affix"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.affix,callback:function(t){e.$set(e.form,"affix",t)},expression:"form.affix"}},e._l(e.affixOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"面包屑",prop:"breadcrumb"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.breadcrumb,callback:function(t){e.$set(e.form,"breadcrumb",t)},expression:"form.breadcrumb"}},e._l(e.breadcrumbOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"是否无缓存",prop:"noCache"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.noCache,callback:function(t){e.$set(e.form,"noCache",t)},expression:"form.noCache"}},e._l(e.noCacheOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"是否禁用",prop:"noCache"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},e._l(e.disabledOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.close}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},o=[],r=l("754e"),n={name:"EditMenu",data(){return{form:{title:"",code:"",id:"",parentId:"",path:"",component:"",sort:"",hidden:"",type:"",icon:"",affix:"",breadcrumb:"",noCache:""},rules:{title:[{required:!0,trigger:"blur",message:"请输入菜单名称"}],code:[{required:!0,trigger:"blur",message:"请输入菜单编码"}],id:[{required:!0,trigger:"blur",message:"请输入id"}],path:[{required:!0,trigger:"blur",message:"请输入路由地址"}],component:[{required:!0,trigger:"blur",message:"请输入组件路径"}],sort:[{required:!0,trigger:"blur",message:"请输入排序"}],hidden:[{required:!0,trigger:"change",message:"请选择是否隐藏"}],type:[{required:!0,trigger:"change",message:"请选择类型"}],affix:[{required:!0,trigger:"change",message:"请选择是否固定"}],breadcrumb:[{required:!0,trigger:"change",message:"请选择面包屑是否显示"}],noCache:[{required:!0,trigger:"change",message:"请选择是否不缓存"}]},title:"",dialogFormVisible:!1,hiddenOptions:[{label:"是",value:!0},{label:"否",value:!1}],typeOptions:[{label:"菜单",value:"menu"},{label:"页面",value:"page"},{label:"按钮",value:"button"}],affixOptions:[{label:"是",value:!0},{label:"否",value:!1}],breadcrumbOptions:[{label:"否",value:!0},{label:"是",value:!1}],noCacheOptions:[{label:"是",value:!0},{label:"否",value:!1}],disabledOptions:[{label:"是",value:!0},{label:"否",value:!1}],action:""}},created(){},methods:{showEdit(e,t){"add"===e?(this.action="add",this.title="新增",this.form=Object.assign({},{parentId:t.id})):"edit"===e&&(this.action="edit",this.title="编辑",this.form=Object.assign({},t)),this.dialogFormVisible=!0},close(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save(){this.$refs["form"].validate(async e=>{if(!e)return!1;{const{msg:e}=await Object(r["doEdit"])(this.form);this.$baseMessage(e,"success"),this.$emit("fetch-data"),this.close()}})}}},i=n,s=l("2877"),c=Object(s["a"])(i,a,o,!1,null,null,null);t["default"]=c.exports}}]);