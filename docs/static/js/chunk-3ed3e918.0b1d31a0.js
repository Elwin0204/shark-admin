/*!
 *  build: shark-admin 
 *  https://elwin0204.github.io/shark-admin 
 *  https://github.com/elwin0204/shark-admin 
 *  time: 2024-3-3 23:30:14
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ed3e918"],{"1ada":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-container"},[r("el-card",[r("el-row",{attrs:{type:"flex",gutter:20}},[r("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[r("el-form",{attrs:{inline:!0,model:t.queryForm},nativeOn:{submit:function(t){t.preventDefault()}}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:t.queryForm.username,callback:function(e){t.$set(t.queryForm,"username","string"===typeof e?e.trim():e)},expression:"queryForm.username"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.queryData}},[t._v(" 查询 ")])],1)],1)],1),r("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[r("div",{staticClass:"btns-box"},[r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.handleEdit}},[t._v(" 新增 ")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:t.handleDelete}},[t._v(" 批量删除 ")])],1)])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":t.elementLoadingText,"header-cell-style":{textAlign:"center"}},on:{"selection-change":t.setSelectRows}},[r("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"id",label:"编号",width:"120",fixed:"left"}}),r("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.avatar,fit:"cover"}}),r("p",{staticClass:"avatar-url",attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(e.row.avatar)+" ")])],1)]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"username",label:"姓名"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"gender",label:"性别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(t._f("genderFilter")(r.gender))+" ")]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"age",label:"年龄",align:"center"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"signature",label:"签名"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"datatime",label:"修改时间"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"权限"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(t._f("permissionsFilter")(r.permissions))+" ")]}}])}),r("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[r("el-tag",{attrs:{effect:"dark",type:t._f("statusTagFilter")(s.status)}},[t._v(" "+t._s(t._f("statusFilter")(s.status))+" ")])]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.handleEdit(s)}}},[t._v(" 编辑 ")]),r("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(e){return t.handleDelete(s)}}},[t._v(" 删除 ")])]}}])})],1),r("el-pagination",{attrs:{background:"","current-page":t.queryForm.pageNo,"page-size":t.queryForm.pageSize,layout:t.layout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("user-edit",{ref:"REF_UserEdit",on:{"fetch-data":t.fetchData}})],1)},i=[],a=r("953d"),n=r("a8ca"),o=r("f121"),l={name:"UserManagement",components:{UserEdit:n["default"]},filters:{statusTagFilter(t){return"Y"===t?"success":"N"===t?"info":"danger"},statusFilter(t){return"Y"===t?"启用":"N"===t?"禁用":"无效数据"},permissionsFilter(t){return JSON.stringify(t)},genderFilter(t){return"MAN"===t?"男":"WOMAN"===t?"女":t}},data(){return{list:null,listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:"",elementLoadingText:"正在加载...",queryForm:{pageNo:1,pageSize:10,username:""}}},created(){this.fetchData()},methods:{setSelectRows(t){this.selectRows=t},handleEdit(t){t.id?this.$refs["REF_UserEdit"].showEdit(t):this.$refs["REF_UserEdit"].showEdit()},handleDelete(t){if(t.id)this.$baseConfirm("你确定要删除当前项吗",null,async()=>{const{msg:e}=await Object(a["doDelete"])({ids:t.id}),r=await this.$dbInstance.getItem("userList")||[],s=r.filter(e=>e.id!==t.id);await this.$dbInstance.setItem("userList",s),this.$baseMessage(e,"success"),this.fetchData()});else{if(!(this.selectRows.length>0))return this.$baseMessage("未选中任何行","error"),!1;{const t=this.selectRows.map(t=>t.id).join();this.$baseConfirm("你确定要删除选中项吗",null,async()=>{const{msg:e}=await Object(a["doDelete"])({ids:t}),r=await this.$dbInstance.getItem("userList")||[],s=r.filter(e=>!t.includes(e.id));await this.$dbInstance.setItem("userList",s),this.$baseMessage(e,"success"),this.fetchData()})}}},handleSizeChange(t){this.queryForm.pageSize=t,this.fetchData()},handleCurrentChange(t){this.queryForm.pageNo=t,this.fetchData()},async queryData(){this.queryForm.pageNo=1,this.fetchData()},async fetchDataLocal(){const t=await this.$dbInstance.getItem("userList")||[],{data:e}=await Object(a["getList"])(this.queryForm),r=this.$baseLodash.unionWith(e,t,this.$baseLodash.isEqual),{title:s="",pageNo:i=1,pageSize:n=20}=this.queryForm,o=r.filter(t=>!(s&&t.title.indexOf(s)<0)),l=o.filter((t,e)=>e<n*i&&e>=n*(i-1));return{data:l,totalCount:o.length}},async fetchData(){this.listLoading=!0;const{data:t,totalCount:e}=o["enableLocalforage"]?await this.fetchDataLocal():await Object(a["getList"])(this.queryForm);this.list=t,this.total=e,setTimeout(()=>{this.listLoading=!1},300)}}},u=l,c=(r("9186"),r("2877")),d=Object(c["a"])(u,s,i,!1,null,"c770ec66",null);e["default"]=d.exports},"5a0c":function(t,e,r){!function(e,r){t.exports=r()}(0,(function(){"use strict";var t=1e3,e=6e4,r=36e5,s="millisecond",i="second",a="minute",n="hour",o="day",l="week",u="month",c="quarter",d="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},b=function(t,e,r){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(r)+t},v={s:b,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),s=Math.floor(r/60),i=r%60;return(e<=0?"+":"-")+b(s,2,"0")+":"+b(i,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var s=12*(r.year()-e.year())+(r.month()-e.month()),i=e.clone().add(s,u),a=r-i<0,n=e.clone().add(s+(a?-1:1),u);return+(-(s+(r-i)/(a?i-n:n-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:d,w:l,d:o,D:f,h:n,m:a,s:i,ms:s,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$="en",y={};y[$]=g;var w=function(t){return t instanceof S},D=function t(e,r,s){var i;if(!e)return $;if("string"==typeof e){var a=e.toLowerCase();y[a]&&(i=a),r&&(y[a]=r,i=a);var n=e.split("-");if(!i&&n.length>1)return t(n[0])}else{var o=e.name;y[o]=e,i=o}return!s&&i&&($=i),i||!s&&$},M=function(t,e){if(w(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new S(r)},_=v;_.l=D,_.i=w,_.w=function(t,e){return M(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function g(t){this.$L=D(t.locale,null,!0),this.parse(t)}var b=g.prototype;return b.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(m);if(s){var i=s[2]-1||0,a=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],i,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)):new Date(s[1],i,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return _},b.isValid=function(){return!(this.$d.toString()===h)},b.isSame=function(t,e){var r=M(t);return this.startOf(e)<=r&&r<=this.endOf(e)},b.isAfter=function(t,e){return M(t)<this.startOf(e)},b.isBefore=function(t,e){return this.endOf(e)<M(t)},b.$g=function(t,e,r){return _.u(t)?this[e]:this.set(r,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,e){var r=this,s=!!_.u(e)||e,c=_.p(t),h=function(t,e){var i=_.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return s?i:i.endOf(o)},m=function(t,e){return _.w(r.toDate()[t].apply(r.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},p=this.$W,g=this.$M,b=this.$D,v="set"+(this.$u?"UTC":"");switch(c){case d:return s?h(1,0):h(31,11);case u:return s?h(1,g):h(0,g+1);case l:var $=this.$locale().weekStart||0,y=(p<$?p+7:p)-$;return h(s?b-y:b+(6-y),g);case o:case f:return m(v+"Hours",0);case n:return m(v+"Minutes",1);case a:return m(v+"Seconds",2);case i:return m(v+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(t,e){var r,l=_.p(t),c="set"+(this.$u?"UTC":""),h=(r={},r[o]=c+"Date",r[f]=c+"Date",r[u]=c+"Month",r[d]=c+"FullYear",r[n]=c+"Hours",r[a]=c+"Minutes",r[i]=c+"Seconds",r[s]=c+"Milliseconds",r)[l],m=l===o?this.$D+(e-this.$W):e;if(l===u||l===d){var p=this.clone().set(f,1);p.$d[h](m),p.init(),this.$d=p.set(f,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},b.set=function(t,e){return this.clone().$set(t,e)},b.get=function(t){return this[_.p(t)]()},b.add=function(s,c){var f,h=this;s=Number(s);var m=_.p(c),p=function(t){var e=M(h);return _.w(e.date(e.date()+Math.round(t*s)),h)};if(m===u)return this.set(u,this.$M+s);if(m===d)return this.set(d,this.$y+s);if(m===o)return p(1);if(m===l)return p(7);var g=(f={},f[a]=e,f[n]=r,f[i]=t,f)[m]||1,b=this.$d.getTime()+s*g;return _.w(b,this)},b.subtract=function(t,e){return this.add(-1*t,e)},b.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var s=t||"YYYY-MM-DDTHH:mm:ssZ",i=_.z(this),a=this.$H,n=this.$m,o=this.$M,l=r.weekdays,u=r.months,c=function(t,r,i,a){return t&&(t[r]||t(e,s))||i[r].slice(0,a)},d=function(t){return _.s(a%12||12,t,"0")},f=r.meridiem||function(t,e,r){var s=t<12?"AM":"PM";return r?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:_.s(o+1,2,"0"),MMM:c(r.monthsShort,o,u,3),MMMM:c(u,o),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,l,2),ddd:c(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:_.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,n,!0),A:f(a,n,!1),m:String(n),mm:_.s(n,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:i};return s.replace(p,(function(t,e){return e||m[t]||i.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(s,f,h){var m,p=_.p(f),g=M(s),b=(g.utcOffset()-this.utcOffset())*e,v=this-g,$=_.m(this,g);return $=(m={},m[d]=$/12,m[u]=$,m[c]=$/3,m[l]=(v-b)/6048e5,m[o]=(v-b)/864e5,m[n]=v/r,m[a]=v/e,m[i]=v/t,m)[p]||v,h?$:_.a($)},b.daysInMonth=function(){return this.endOf(u).$D},b.$locale=function(){return y[this.$L]},b.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),s=D(t,e,!0);return s&&(r.$L=s),r},b.clone=function(){return _.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},g}(),x=S.prototype;return M.prototype=x,[["$ms",s],["$s",i],["$m",a],["$H",n],["$W",o],["$M",u],["$y",d],["$D",f]].forEach((function(t){x[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),M.extend=function(t,e){return t.$i||(t(e,S,M),t.$i=!0),M},M.locale=D,M.isDayjs=w,M.unix=function(t){return M(1e3*t)},M.en=y[$],M.Ls=y,M.p={},M}))},9186:function(t,e,r){"use strict";r("baba")},"953d":function(t,e,r){"use strict";r.r(e),r.d(e,"getList",(function(){return i})),r.d(e,"doEdit",(function(){return a})),r.d(e,"doDelete",(function(){return n}));var s=r("b775");function i(t){return Object(s["default"])({url:"/userManagement/getList",method:"post",data:t})}function a(t){return Object(s["default"])({url:"/userManagement/doEdit",method:"post",data:t})}function n(t){return Object(s["default"])({url:"/userManagement/doDelete",method:"post",data:t})}},a8ca:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.close}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"编号",prop:"id"}},[r("el-input",{attrs:{disabled:t.fieldConfig.id.disabled,autocomplete:"off"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id","string"===typeof e?e.trim():e)},expression:"form.id"}})],1),r("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.avatar,callback:function(e){t.$set(t.form,"avatar","string"===typeof e?e.trim():e)},expression:"form.avatar"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"username"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username","string"===typeof e?e.trim():e)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email","string"===typeof e?e.trim():e)},expression:"form.email"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio-group",{model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},[r("el-radio",{attrs:{label:"MAN"}},[t._v("男")]),r("el-radio",{attrs:{label:"WOMAN"}},[t._v("女")])],1)],1),r("el-form-item",{attrs:{label:"年龄",prop:"age"}},[r("el-input-number",{attrs:{"controls-position":"right",min:1,max:200},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age","string"===typeof e?e.trim():e)},expression:"form.age"}})],1),r("el-form-item",{attrs:{label:"签名",prop:"signature"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入签名",autocomplete:"off"},model:{value:t.form.signature,callback:function(e){t.$set(t.form,"signature","string"===typeof e?e.trim():e)},expression:"form.signature"}})],1),r("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[r("el-select",{attrs:{multiple:"",filterable:"","default-first-option":"",placeholder:"请选择权限"},model:{value:t.form.permissions,callback:function(e){t.$set(t.form,"permissions",e)},expression:"form.permissions"}},t._l(t.permissionOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status","string"===typeof e?e.trim():e)},expression:"form.status"}},t._l(t.statusOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)},i=[],a=r("953d"),n=r("5a0c"),o=r.n(n),l={name:"UserManagementEdit",data(){return{form:{id:"",avatar:"",username:"",password:"",email:"",gender:"",age:"",signature:"",permissions:[],datatime:"",status:""},fieldConfig:{id:{disabled:!1}},rules:{id:[{required:!0,trigger:"blur",message:"请输入id"}],avatar:[{required:!0,trigger:"blur",message:"请输入头像url"}],username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],email:[{required:!0,trigger:"blur",message:"请输入邮箱"}],gender:[{required:!0,trigger:"blur",message:"请选择性别"}],age:[{required:!0,trigger:"blur",message:"请输入年龄"}],signature:[{required:!0,trigger:"blur",message:"请输入签名"}],permissions:[{required:!0,trigger:"blur",message:"请选择权限"}],status:[{required:!0,trigger:"blur",message:"请选择状态"}]},statusOptions:[{label:"启用",value:"Y"},{label:"禁用",value:"N"}],permissionOptions:[{label:"管理员",value:"admin"},{label:"权限1",value:"editor"}],title:"",action:"",dialogFormVisible:!1}},created(){},methods:{showEdit(t){t?(this.title="编辑",this.action="edit",this.form=Object.assign({},t),this.fieldConfig.id.disabled=!0):(this.title="新增",this.action="add",this.fieldConfig.id.disabled=!1),this.dialogFormVisible=!0},close(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},checkExisted(t,e){return!!t.find(t=>t.id===e.id)},save(){this.$refs["form"].validate(async t=>{if(!t)return!1;{this.form.datatime=o()().format("YYYY-MM-DD HH:mm:ss");const t=await this.$dbInstance.getItem("userList")||[];if("add"===this.action){if(this.checkExisted(t,this.form))return this.$baseMessage("该用户已存在","error"),!1;this.form.uid=this.$genid.NextId();const e=this.$baseLodash.unionWith(t,[this.form],this.$baseLodash.isEqual);await this.$dbInstance.setItem("userList",e)}else if("edit"===this.action){const e=t.findIndex(t=>t.id===this.form.id);t.splice(e,1,this.form),await this.$dbInstance.setItem("userList",t)}const{msg:e}=await Object(a["doEdit"])(this.form);this.$baseMessage(e,"success"),this.$emit("fetch-data"),this.close()}})}}},u=l,c=r("2877"),d=Object(c["a"])(u,s,i,!1,null,null,null);e["default"]=d.exports},baba:function(t,e,r){}}]);